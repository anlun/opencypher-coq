<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./">Project Page</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">OpencypherCoq.Cypher</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="OpencypherCoq.PropertyGraph.html#"><span class="id" title="library">PropertyGraph</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="OpencypherCoq.PropertyGraph.html#Property"><span class="id" title="module">Property</span></a>.<br/>

<br/>
</div>

<div class="doc">
Query pattern definition. In general terms, the query pattern is the conditions on the edges  and vertices in the desired path. These conditions (patterns) are stored sequentially: 
<div class="paragraph"> </div>

 start vertex pattern --- first edge pattern --- vertex pattern --- ... --- edge pattern --- last vertex pattern 
<div class="paragraph"> </div>

 (vertex and edge pattern alternate). We decided to store this query pattern in a special way.  Pattern contains start vertex pattern and pairs (edge pattern, vertex pattern). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="Pattern" class="idref" href="#Pattern"><span class="id" title="module">Pattern</span></a>.<br/>

<br/>
</div>

<div class="doc">
Possible conditions for edge direction. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Pattern.direction" class="idref" href="#Pattern.direction"><span class="id" title="inductive">direction</span></a> :=<br/>
&nbsp;&nbsp;| <a id="Pattern.OUT" class="idref" href="#Pattern.OUT"><span class="id" title="constructor">OUT</span></a><br/>
&nbsp;&nbsp;| <a id="Pattern.IN" class="idref" href="#Pattern.IN"><span class="id" title="constructor">IN</span></a><br/>
&nbsp;&nbsp;| <a id="Pattern.BOTH" class="idref" href="#Pattern.BOTH"><span class="id" title="constructor">BOTH</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
Vertex pattern condition. 
<div class="paragraph"> </div>

 vlabels : list of labels stored in a vertex 
<div class="paragraph"> </div>

 vprops  : list of pairs (key, value) stored in a vertex 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="Pattern.pvertex" class="idref" href="#Pattern.pvertex"><span class="id" title="record">pvertex</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.vlabels" class="idref" href="#Pattern.vlabels"><span class="id" title="projection">vlabels</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.vprops" class="idref" href="#Pattern.vprops"><span class="id" title="projection">vprops</span></a>  : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="OpencypherCoq.PropertyGraph.html#Property.t"><span class="id" title="inductive">Property.t</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
Edge pattern. It is a pair where the first item is edge condition (contained in elabels, eprops, edir, enum)  and the second item is pattern of following vertex (contained in evertex). 
<div class="paragraph"> </div>

 elabels : list of labels stored in an edge 
<div class="paragraph"> </div>

 eprops  : list of pairs (key, value) stored in an edge 
<div class="paragraph"> </div>

 edir    : direction condition 
<div class="paragraph"> </div>

 enum    : number of sequential edges with current pattern in the desired path, by default is 1            /future: add the range to enum/ 
<div class="paragraph"> </div>

 evertex : vertex pattern 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="Pattern.pedge" class="idref" href="#Pattern.pedge"><span class="id" title="record">pedge</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.elabels" class="idref" href="#Pattern.elabels"><span class="id" title="projection">elabels</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.eprops" class="idref" href="#Pattern.eprops"><span class="id" title="projection">eprops</span></a>  : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="OpencypherCoq.PropertyGraph.html#Property.t"><span class="id" title="inductive">Property.t</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.edir" class="idref" href="#Pattern.edir"><span class="id" title="projection">edir</span></a>    : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.direction"><span class="id" title="inductive">direction</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.enum" class="idref" href="#Pattern.enum"><span class="id" title="projection">enum</span></a>    : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.evertex" class="idref" href="#Pattern.evertex"><span class="id" title="projection">evertex</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.pvertex"><span class="id" title="record">pvertex</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Pattern.tree" class="idref" href="#Pattern.tree"><span class="id" title="inductive">tree</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="Pattern.Leaf" class="idref" href="#Pattern.Leaf"><span class="id" title="constructor">Leaf</span></a> (<a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.pedge"><span class="id" title="record">pedge</span></a>)<br/>
&nbsp;&nbsp;| <a id="Pattern.Node" class="idref" href="#Pattern.Node"><span class="id" title="constructor">Node</span></a> (<a id="t1:15" class="idref" href="#t1:15"><span class="id" title="binder">t1</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#tree:12"><span class="id" title="inductive">tree</span></a>) (<a id="t2:16" class="idref" href="#t2:16"><span class="id" title="binder">t2</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#tree:12"><span class="id" title="inductive">tree</span></a>).<br/>

<br/>
</div>

<div class="doc">
Query pattern. 
<div class="paragraph"> </div>

 start  : pattern of the first vertex 
<div class="paragraph"> </div>

 ledges : list of consequ–µntive pattern edges 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="Pattern.t" class="idref" href="#Pattern.t"><span class="id" title="record">t</span></a> := <a id="Pattern.mk" class="idref" href="#Pattern.mk"><span class="id" title="constructor">mk</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.start" class="idref" href="#Pattern.start"><span class="id" title="projection">start</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.pvertex"><span class="id" title="record">pvertex</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Pattern.ledges" class="idref" href="#Pattern.ledges"><span class="id" title="projection">ledges</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.tree"><span class="id" title="inductive">tree</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
 Tree normalization: 
   --               -
  /  \             / \
<ul class="doclist">
<li>    -  -&gt;       a   -

</li>
</ul>
/ \  / \             / \
a  b c d             b  -
                       / \
                      c   d 

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Pattern.insert_tree_r" class="idref" href="#Pattern.insert_tree_r"><span class="id" title="definition">insert_tree_r</span></a> (<a id="t_to_be_inserted:20" class="idref" href="#t_to_be_inserted:20"><span class="id" title="binder">t_to_be_inserted</span></a> <a id="t:21" class="idref" href="#t:21"><span class="id" title="binder">t</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.tree"><span class="id" title="inductive">tree</span></a>) : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.tree"><span class="id" title="inductive">tree</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="OpencypherCoq.Cypher.html#t:21"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>   =&gt; <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#t:21"><span class="id" title="variable">t</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#t_to_be_inserted:20"><span class="id" title="variable">t_to_be_inserted</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">l</span> <span class="id" title="var">r</span> =&gt; <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">l</span> (<a class="idref" href="OpencypherCoq.Cypher.html#insert_tree_r:22"><span class="id" title="definition">insert_tree_r</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#t_to_be_inserted:20"><span class="id" title="variable">t_to_be_inserted</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Pattern.tree_normalize" class="idref" href="#Pattern.tree_normalize"><span class="id" title="definition">tree_normalize</span></a> (<a id="t:24" class="idref" href="#t:24"><span class="id" title="binder">t</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.tree"><span class="id" title="inductive">tree</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="OpencypherCoq.Cypher.html#t:24"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="OpencypherCoq.Cypher.html#t:24"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">l</span> <span class="id" title="var">r</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="nl:27" class="idref" href="#nl:27"><span class="id" title="binder">nl</span></a> := <a class="idref" href="OpencypherCoq.Cypher.html#tree_normalize:25"><span class="id" title="definition">tree_normalize</span></a> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="nr:28" class="idref" href="#nr:28"><span class="id" title="binder">nr</span></a> := <a class="idref" href="OpencypherCoq.Cypher.html#tree_normalize:25"><span class="id" title="definition">tree_normalize</span></a> <span class="id" title="var">r</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="OpencypherCoq.Cypher.html#Pattern.insert_tree_r"><span class="id" title="definition">insert_tree_r</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#nr:28"><span class="id" title="variable">nr</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#nl:27"><span class="id" title="variable">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Pattern.normalize" class="idref" href="#Pattern.normalize"><span class="id" title="definition">normalize</span></a> (<a id="p:29" class="idref" href="#p:29"><span class="id" title="binder">p</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.t"><span class="id" title="record">t</span></a>) := <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.mk"><span class="id" title="constructor">mk</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#p:29"><span class="id" title="variable">p</span></a>.(<a class="idref" href="OpencypherCoq.Cypher.html#Pattern.start"><span class="id" title="projection">start</span></a>) (<a class="idref" href="OpencypherCoq.Cypher.html#Pattern.tree_normalize"><span class="id" title="definition">tree_normalize</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#p:29"><span class="id" title="variable">p</span></a>.(<a class="idref" href="OpencypherCoq.Cypher.html#Pattern.ledges"><span class="id" title="projection">ledges</span></a>)).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="OpencypherCoq.Cypher.html#Pattern"><span class="id" title="module">Pattern</span></a>.<br/>

<br/>
</div>

<div class="doc">
Query definition 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="ProjectionExpr" class="idref" href="#ProjectionExpr"><span class="id" title="module">ProjectionExpr</span></a>.<br/>
<span class="id" title="keyword">Inductive</span> <a id="ProjectionExpr.proj" class="idref" href="#ProjectionExpr.proj"><span class="id" title="inductive">proj</span></a> := <a id="ProjectionExpr.AS" class="idref" href="#ProjectionExpr.AS"><span class="id" title="constructor">AS</span></a> (<a id="from:32" class="idref" href="#from:32"><span class="id" title="binder">from</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="to:33" class="idref" href="#to:33"><span class="id" title="binder">to</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ProjectionExpr.t" class="idref" href="#ProjectionExpr.t"><span class="id" title="definition">t</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#ProjectionExpr.proj"><span class="id" title="inductive">proj</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="OpencypherCoq.Cypher.html#ProjectionExpr"><span class="id" title="module">ProjectionExpr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Clause" class="idref" href="#Clause"><span class="id" title="module">Clause</span></a>.<br/>
<span class="id" title="keyword">Inductive</span> <a id="Clause.t" class="idref" href="#Clause.t"><span class="id" title="inductive">t</span></a> := <br/>
| <a id="Clause.MATCH" class="idref" href="#Clause.MATCH"><span class="id" title="constructor">MATCH</span></a> (<a id="patterns:36" class="idref" href="#patterns:36"><span class="id" title="binder">patterns</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#Pattern.t"><span class="id" title="record">Pattern.t</span></a>)<br/>
| <a id="Clause.WITH" class="idref" href="#Clause.WITH"><span class="id" title="constructor">WITH</span></a> (<a id="pexpr:37" class="idref" href="#pexpr:37"><span class="id" title="binder">pexpr</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#ProjectionExpr.t"><span class="id" title="definition">ProjectionExpr.t</span></a>)<br/>
.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="OpencypherCoq.Cypher.html#Clause"><span class="id" title="module">Clause</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Query" class="idref" href="#Query"><span class="id" title="module">Query</span></a>.<br/>
<span class="id" title="keyword">Record</span> <a id="Query.t" class="idref" href="#Query.t"><span class="id" title="record">t</span></a> := <a id="Query.mk" class="idref" href="#Query.mk"><span class="id" title="constructor">mk</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Query.clauses" class="idref" href="#Query.clauses"><span class="id" title="projection">clauses</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="OpencypherCoq.Cypher.html#Clause.t"><span class="id" title="inductive">Clause.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Query.ret" class="idref" href="#Query.ret"><span class="id" title="projection">ret</span></a> : <a class="idref" href="OpencypherCoq.Cypher.html#ProjectionExpr.t"><span class="id" title="definition">ProjectionExpr.t</span></a>;<br/>
}.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="OpencypherCoq.Cypher.html#Query"><span class="id" title="module">Query</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
